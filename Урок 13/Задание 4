import random

def is_valid(user_input, n):
    if user_input.isdigit():
        user_number = int(user_input)
        if user_number >= 1 and user_number <= n:
            return True
        else:
            return False
    else:
        return False

def minimal_answer(n):
    count = 0
    number = n
    while number // 2 != 0:
        number = number // 2
        count += 1
    return count

def start_game():
    n = int(input('Введите до какого числа будем отгадывать? '))
    secret_number = random.randint(1, n)
    print('WELCOME TO THE GAME!!!')
    count = 0
    while True:
        print('Введите число от 1 до', n, ': ')

        user_input = input()
        if not is_valid(user_input, n):
            continue
        user_number = int(user_input)

        if secret_number > user_number:
            print('Загаданное число больше, чем введенное')
            count += 1
        elif secret_number < user_number:
            print('Загаданное число меньше, чем введенное')
            count += 1
        else:
            print('Вы угадали число')
            print('Вы угадали за:', count, 'попыток')
            print('Лучший результат можно было достич за', minimal_answer(n), 'попытки. Если знать алгоритмы')
            break

    print('Спасибо за игру! Ждём вас ещё!')

def new_game():
    game_continue = input('Хотите сыграть ещё, Y or N: ')
    if game_continue.lower() == 'Y'.lower():
        start_game()


start_game()
new_game()

